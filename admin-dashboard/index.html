<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; media-src 'self' https:; connect-src 'self' https:; font-src 'self' data:;">
    <title>Dancify Admin Dashboard</title>
    
    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="/admin/css/main.css">
    <link rel="stylesheet" href="/admin/css/components.css">
    <link rel="stylesheet" href="/admin/css/responsive.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>Loading Dancify Admin</h2>
            <p>Initializing dashboard components...</p>
        </div>
    </div>

    <!-- Main Application Container -->
    <div class="container" id="mainContainer" style="display: none;">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>Dancify Admin</h1>
            </div>
            
            <div class="nav-section">
                <h3>Main</h3>
                <a class="nav-item active" data-section="dashboard">
                    <span class="nav-icon">📊</span>
                    Dashboard
                </a>
                <a class="nav-item" data-section="users">
                    <span class="nav-icon">👥</span>
                    Users
                </a>
            </div>
            
            <div class="nav-section">
                <h3>Content Management</h3>
                <a class="nav-item" data-section="move-management">
                    <span class="nav-icon">🕺</span>
                    Move Management
                </a>
                <a class="nav-item" data-section="dance-style-management">
                    <span class="nav-icon">🎭</span>
                    Dance Styles
                </a>
                <a class="nav-item" data-section="move-submissions">
                    <span class="nav-icon">📹</span>
                    Submissions
                </a>
                <a class="nav-item" data-section="choreography">
                    <span class="nav-icon">🎵</span>
                    Choreography
                </a>
            </div>

            <div class="nav-section">
                <h3>Learning & Growth</h3>
                <a class="nav-item" data-section="instructor-applications">
                    <span class="nav-icon">🎓</span>
                    Instructors
                </a>
                <a class="nav-item" data-section="feedback">
                    <span class="nav-icon">💬</span>
                    Feedback
                </a>
                <a class="nav-item" data-section="social-posts">
                    <span class="nav-icon">📱</span>
                    Social Posts
                </a>
            </div>

            <div class="nav-section">
                <h3>Analytics & Reports</h3>
                <a class="nav-item" data-section="reports">
                    <span class="nav-icon">📈</span>
                    Reports
                </a>
                <a class="nav-item" data-section="analytics">
                    <span class="nav-icon">📊</span>
                    Analytics
                </a>
            </div>

            <div class="nav-section">
                <h3>System</h3>
                <a class="nav-item" data-section="settings">
                    <span class="nav-icon">⚙️</span>
                    Settings
                </a>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content" id="mainContent">
            <div class="content-container">
                <!-- All sections will be dynamically loaded here -->
            </div>
        </main>
    </div>

    <!-- Modals Container -->
    <div id="modalsContainer"></div>

    <!-- Core JavaScript Files -->
    <script src="/admin/js/api-client.js"></script>
    <script src="/admin/js/navigation.js"></script>
    <script src="/admin/js/dashboard.js"></script>
    <script src="/admin/js/section-loader.js"></script>
    
    <!-- Management Scripts -->
    <script src="/admin/js/move-management.js"></script>
    
    <!-- Main Application Script -->
    <script src="/admin/js/main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Dancify Admin Dashboard starting...');
            
            // FIXED: Safe loading screen removal
            setTimeout(function() {
                const loadingScreen = document.getElementById('loadingScreen');
                const mainContainer = document.getElementById('mainContainer');
                
                if (loadingScreen) {
                    loadingScreen.style.display = 'none';
                }
                if (mainContainer) {
                    mainContainer.style.display = 'flex';
                }
                
                console.log('Dancify Admin Dashboard loaded');
            }, 1500);
        });
    </script>
</body>
</html>